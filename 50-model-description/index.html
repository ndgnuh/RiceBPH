<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Model description · RiceBPH</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">RiceBPH</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">RiceBPH Model</a></li><li class="is-active"><a class="tocitem" href>Model description</a><ul class="internal"><li><a class="tocitem" href="#Purpose-and-pattern"><span>Purpose and pattern</span></a></li><li><a class="tocitem" href="#Entities,-state-variables,-and-scales"><span>Entities, state variables, and scales</span></a></li><li><a class="tocitem" href="#Process-overview-and-scheduling"><span>Process overview and scheduling</span></a></li><li><a class="tocitem" href="#Design-Concepts"><span>Design Concepts</span></a></li><li><a class="tocitem" href="#Initialisation"><span>Initialisation</span></a></li><li><a class="tocitem" href="#Input-data"><span>Input data</span></a></li><li><a class="tocitem" href="#Submodels"><span>Submodels</span></a></li><li><a class="tocitem" href="#Bibliography"><span>Bibliography</span></a></li></ul></li><li><a class="tocitem" href="../99-api/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Model description</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Model description</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/ndgnuh/RiceBPH/blob/master/docs/src/50-model-description.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Model-description"><a class="docs-heading-anchor" href="#Model-description">Model description</a><a id="Model-description-1"></a><a class="docs-heading-anchor-permalink" href="#Model-description" title="Permalink"></a></h1><h2 id="Purpose-and-pattern"><a class="docs-heading-anchor" href="#Purpose-and-pattern">Purpose and pattern</a><a id="Purpose-and-pattern-1"></a><a class="docs-heading-anchor-permalink" href="#Purpose-and-pattern" title="Permalink"></a></h2><p>This model has two purposes, the first is to build a stable model for BPH population. The second is to research the effectiveness of cultivated flower in preventing the dispersion of BPH and providing a rough guideline  on how flowers should be planted to effectively prevent the BPH from spreading  and still, ensure economic benefit for the farmers.</p><p>To verify the stability and trustiness of the model, we use population structure and patterns from <a href=".">Syahrawati2019</a> as a pattern for verifying our model.</p><h2 id="Entities,-state-variables,-and-scales"><a class="docs-heading-anchor" href="#Entities,-state-variables,-and-scales">Entities, state variables, and scales</a><a id="Entities,-state-variables,-and-scales-1"></a><a class="docs-heading-anchor-permalink" href="#Entities,-state-variables,-and-scales" title="Permalink"></a></h2><h3 id="Entities-and-state-variables"><a class="docs-heading-anchor" href="#Entities-and-state-variables">Entities and state variables</a><a id="Entities-and-state-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Entities-and-state-variables" title="Permalink"></a></h3><p>Our model contains two types of entities.</p><p>The first type of entity is the BPH. Each is associated with, energy, a stage, gender, and type. The BPH has a truncate-winged form Brachypterous and a fully-winged form Macropterous. The Brachypterous variant moves slowly and has a high reproduction rate, while the other has the opposite specifications. We also employ a countdown-based system to model the reproduction and growth of BPHs.</p><table><tr><th style="text-align: left">Variable</th><th style="text-align: left">Description</th><th style="text-align: left">Value(s)</th></tr><tr><td style="text-align: left"><span>$i$</span></td><td style="text-align: left">The agent identifier number</td><td style="text-align: left"><span>$1, 2, \ldots$</span></td></tr><tr><td style="text-align: left"><span>$x_i$</span></td><td style="text-align: left">The <span>$x$</span>-coordinate of agent <span>$i$</span> on the environment grid</td><td style="text-align: left"><span>$1, 2, \ldots S$</span></td></tr><tr><td style="text-align: left"><span>$y_i$</span></td><td style="text-align: left">The <span>$y$</span>-coordinate of agent <span>$i$</span> on the environment grid</td><td style="text-align: left"><span>$1, 2, \ldots S$</span></td></tr><tr><td style="text-align: left"><span>$z^{(g)}_i$</span></td><td style="text-align: left">The gender of agent <span>$i$</span> (male, female)</td><td style="text-align: left"><span>$0, 1$</span></td></tr><tr><td style="text-align: left"><span>$z^{(s)}_i$</span></td><td style="text-align: left">The current stage of agent <span>$i$</span> (egg, nymph, adult, dead)</td><td style="text-align: left"><span>$0, 1, 2, 3$</span></td></tr><tr><td style="text-align: left"><span>$z^{(f)}_i$</span></td><td style="text-align: left">The form of agent <span>$i$</span> (brachypterous, macropterous)</td><td style="text-align: left"><span>$0, 1$</span></td></tr><tr><td style="text-align: left"><span>$t^{(s)}_i$</span></td><td style="text-align: left">The countdown to the next stage of agent <span>$i$</span></td><td style="text-align: left"><span>$0, 1,\ldots$</span></td></tr><tr><td style="text-align: left"><span>$t^{(r)}_i$</span></td><td style="text-align: left">The countdown to the next reproduction of agent <span>$i$</span></td><td style="text-align: left"><span>$0, 1,\ldots$</span></td></tr></table><p>The second type of entity is the environment (grid) cell. An environment cell can plant rice or cultivated flower.  Rice cells have living energy while flower cells do not.  But for the sake of simplicity, we model them in one entity and have the flower cells ignore the energy. All cells have an elimination probability, which is the probability that the BPH on that cell will be eliminated. The cultivated flowers do not directly eliminate the BPH, they attract their natural enemies (such as bees). The natural enemies wander around, therefore every cell has an elimination probability.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Since we use Julia&#39;s matrices to represent the simulated environment, there is no such thing as a <code>GridCell</code> type with all the described state variable in the implementation. These state variables are written is this way for the sake of model description.</p></div></div><table><tr><th style="text-align: left">Variable</th><th style="text-align: left">Description</th><th style="text-align: left">Value(s)</th></tr><tr><td style="text-align: left"><span>$x$</span></td><td style="text-align: left">The cell&#39;s <span>$x$</span>-coordinate on the environment grid</td><td style="text-align: left"><span>$1, 2,\ldots,S$</span></td></tr><tr><td style="text-align: left"><span>$y$</span></td><td style="text-align: left">The cell&#39;s <span>$y$</span>-coordinate on the environment grid</td><td style="text-align: left"><span>$1, 2,\ldots,S$</span></td></tr><tr><td style="text-align: left"><span>$t_{x, y}$</span></td><td style="text-align: left">The type of the cell at <span>$x, y$</span> (flower, rice)</td><td style="text-align: left"><span>$0, 1$</span></td></tr><tr><td style="text-align: left"><span>$e_{x, y}$</span></td><td style="text-align: left">The energy of the cell at <span>$x, y$</span></td><td style="text-align: left"><span>$[0, 1]$</span></td></tr><tr><td style="text-align: left"><span>$p_{x, y}$</span></td><td style="text-align: left">The elimination probability of the cell at <span>$x, y$</span></td><td style="text-align: left"><span>$[0, P_0]$</span></td></tr></table><h3 id="Scales"><a class="docs-heading-anchor" href="#Scales">Scales</a><a id="Scales-1"></a><a class="docs-heading-anchor-permalink" href="#Scales" title="Permalink"></a></h3><p>Regarding the scales of the model, we use a discrete space scale. The total simulated environment is equivalent to a <span>$360\mathrm{m^2}$</span> rice field. The field is divided into <span>$125\times125$</span> grid cells; i.e. each cell&#39;s width is roughly equivalent to <span>$0.15\mathrm{m}$</span> real world length.</p><p>Time is also represented discretely in the model. Each time step is equivalent to one actual hour.  The total duration of the simulation is <span>$2880$</span> steps, or <span>$120$</span> days, equivalent to a crop cycle.</p><h2 id="Process-overview-and-scheduling"><a class="docs-heading-anchor" href="#Process-overview-and-scheduling">Process overview and scheduling</a><a id="Process-overview-and-scheduling-1"></a><a class="docs-heading-anchor-permalink" href="#Process-overview-and-scheduling" title="Permalink"></a></h2><h3 id="Scheduling"><a class="docs-heading-anchor" href="#Scheduling">Scheduling</a><a id="Scheduling-1"></a><a class="docs-heading-anchor-permalink" href="#Scheduling" title="Permalink"></a></h3><p>In each step of the simulation, the BPH agents execute their processes and  then the environment cells do theirs. The BPH agents with higher energy perform their actions first.</p><h3 id="The-vegetation-cells-process"><a class="docs-heading-anchor" href="#The-vegetation-cells-process">The vegetation cells process</a><a id="The-vegetation-cells-process-1"></a><a class="docs-heading-anchor-permalink" href="#The-vegetation-cells-process" title="Permalink"></a></h3><p>The environment only has one action, which is to eliminate the BPHs. This action does not apply if there is no flower planted.</p><h3 id="The-BPH-agents-processes"><a class="docs-heading-anchor" href="#The-BPH-agents-processes">The BPH agents processes</a><a id="The-BPH-agents-processes-1"></a><a class="docs-heading-anchor-permalink" href="#The-BPH-agents-processes" title="Permalink"></a></h3><p>The agent actions are determined by their stages, each stage have different behaviours.</p><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.agent_step_egg!" href="#RiceBPH.Models.agent_step_egg!"><code>RiceBPH.Models.agent_step_egg!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">agent_step_egg!(agent, model)</code></pre><p>The eggs have the following actions (performed in order):</p><ul><li><a href="#RiceBPH.Models.agent_action_growup!"><code>agent_action_growup!</code></a></li><li><a href="#RiceBPH.Models.agent_action_die!"><code>agent_action_die!</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/agent_step.jl#L270-L276">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.agent_step_nymph!" href="#RiceBPH.Models.agent_step_nymph!"><code>RiceBPH.Models.agent_step_nymph!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">agent_step_nymph!(agent, model)</code></pre><p>The nymphs have the following actions (performed in order):</p><ul><li><a href="#RiceBPH.Models.agent_action_growup!"><code>agent_action_growup!</code></a></li><li><a href="#RiceBPH.Models.agent_action_move!"><code>agent_action_move!</code></a></li><li><a href="#RiceBPH.Models.agent_action_eat!"><code>agent_action_eat!</code></a></li><li><a href="#RiceBPH.Models.agent_action_die!"><code>agent_action_die!</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/agent_step.jl#L282-L290">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.agent_step_adult!" href="#RiceBPH.Models.agent_step_adult!"><code>RiceBPH.Models.agent_step_adult!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">agent_step_adult!(agent, model)</code></pre><p>The adult BPHs have the following actions (performed in order):</p><ul><li><a href="#RiceBPH.Models.agent_action_growup!"><code>agent_action_growup!</code></a></li><li><a href="#RiceBPH.Models.agent_action_move!"><code>agent_action_move!</code></a></li><li><a href="#RiceBPH.Models.agent_action_eat!"><code>agent_action_eat!</code></a></li><li><a href="#RiceBPH.Models.agent_action_reproduce!"><code>agent_action_reproduce!</code></a></li><li><a href="#RiceBPH.Models.agent_action_die!"><code>agent_action_die!</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/agent_step.jl#L298-L307">source</a></section></article><h2 id="Design-Concepts"><a class="docs-heading-anchor" href="#Design-Concepts">Design Concepts</a><a id="Design-Concepts-1"></a><a class="docs-heading-anchor-permalink" href="#Design-Concepts" title="Permalink"></a></h2><h3 id="Basic-principle"><a class="docs-heading-anchor" href="#Basic-principle">Basic principle</a><a id="Basic-principle-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-principle" title="Permalink"></a></h3><p>The model is based on a natural real-life phenomenon called &quot;hopper burn&quot;, where a small infestation of BPH spreads out and destroys the whole rice field.</p><p>We model bio-conversion using energy.  The energy is used to measure how well an agent is living.  The energy accepts values ranging from zero to one. When an agent&#39;s energy goes to zero, it dies and gets removed from the simulation. Both entities have their energy scaled to <span>$0$</span> and <span>$1$</span> and there is a conversion parameter to represent the relative energy scale between them.</p><p>The flower grid cells are simulations of real-life cultivating flowers. The flowers invite the BPH&#39;s natural enemies to eliminate them.  We emulate this with an elimination probability map on the whole field. Each cell has a probability that: if a BPH is in that position, it might get eliminated.</p><h3 id="Emergence"><a class="docs-heading-anchor" href="#Emergence">Emergence</a><a id="Emergence-1"></a><a class="docs-heading-anchor-permalink" href="#Emergence" title="Permalink"></a></h3><p>At a high level, we observe the BPH population structure and the overall healthiness of the rice field.</p><h3 id="Adaptation"><a class="docs-heading-anchor" href="#Adaptation">Adaptation</a><a id="Adaptation-1"></a><a class="docs-heading-anchor-permalink" href="#Adaptation" title="Permalink"></a></h3><p>The BPHs base their decisions on their internal states and on the vegetation cell&#39;s type and energy.</p><p>The first input is their stage. Each stage links to specific actions. For example, BPH eggs can not move around. The second input is their countdowns. Their actions are timed by their countdowns. The third input is their energy. Their actions have energy-based conditions. The fourth input is the environment cell type and energy. These factors affect their movement, eating, and reproduction.</p><h3 id="Prediction"><a class="docs-heading-anchor" href="#Prediction">Prediction</a><a id="Prediction-1"></a><a class="docs-heading-anchor-permalink" href="#Prediction" title="Permalink"></a></h3><p>The BPHs agent implicitly predicts the amount of food available. Their prediction is presented in probabilities.  Their movement distribution is calculated from environment energy states. Their reproduction is also conditioned on the environment cell&#39;s energy.</p><h3 id="Sensing"><a class="docs-heading-anchor" href="#Sensing">Sensing</a><a id="Sensing-1"></a><a class="docs-heading-anchor-permalink" href="#Sensing" title="Permalink"></a></h3><p>The BPHs are able to sense their internal states. They can also sense the energy and type of nearby cells to make predictions and decisions. </p><h3 id="Interaction"><a class="docs-heading-anchor" href="#Interaction">Interaction</a><a id="Interaction-1"></a><a class="docs-heading-anchor-permalink" href="#Interaction" title="Permalink"></a></h3><p>There are one direct interaction and two indirect ones.</p><p>The direct one is that the BPHs feed off the cells with rice directly.  The indirect interactions are:</p><ul><li>The cells eliminate the BPHs with the probability map. </li><li>The BPHs indirectly compete among themselves for food from the vegetation cells.</li></ul><p>We consider the former interaction indirect because the probability map was just emulating the natural enemies, which is not modeled in our model.</p><h3 id="Stochasticity"><a class="docs-heading-anchor" href="#Stochasticity">Stochasticity</a><a id="Stochasticity-1"></a><a class="docs-heading-anchor-permalink" href="#Stochasticity" title="Permalink"></a></h3><p>Stochasticity is used in the model mainly for the diversity of the results and to realistically model multi-option processes and to simplify complicated phenomena.</p><p>The processes that use stochasticity are:</p><ul><li>initial placement and population structure of BPHs,</li><li>the BPHs&#39; growth,</li><li>the BPHs&#39; reproduction,</li><li>the BPHs&#39; movement.</li></ul><p>For reproducibility, we use a controlled pseudo-random number generator for all the stochastic processes in the model.</p><h3 id="Observation"><a class="docs-heading-anchor" href="#Observation">Observation</a><a id="Observation-1"></a><a class="docs-heading-anchor-permalink" href="#Observation" title="Permalink"></a></h3><p>During our experiment, we collect the following data:</p><ul><li>the percentage of healthy rice cells <span>$r_R$</span>,</li><li>the number of eggs <span>$n_E$</span>,</li><li>the number of nymphs <span>$n_N$</span>,</li><li>the number of adult macropterous <span>$n_M$</span>,</li><li>the number of adult brachypterous <span>$n_P$</span>,</li><li>the number of female nymphs and adults <span>$n_F$</span>.</li></ul><p>For the BPH-related data, we also calculate inferable data such as:</p><ul><li>the total number of BPHs (eggs are not counted) <span>$n_A$</span>,</li><li>the percentage of nymphs <span>$r_N$</span>,</li><li>the percentage of adult macropterous <span>$r_M$</span>,</li><li>the percentage of adult brachypterous <span>$r_P$</span>,</li><li>the ratio of females over males <span>$r_F$</span>.</li></ul><p>We collect these data at each time step of the simulation. We use a function-like annotation to refer to the data point at a specific time step. For example, the number of eggs at the time <span>$t$</span> is <span>$n_E(t)$</span>.</p><h2 id="Initialisation"><a class="docs-heading-anchor" href="#Initialisation">Initialisation</a><a id="Initialisation-1"></a><a class="docs-heading-anchor-permalink" href="#Initialisation" title="Permalink"></a></h2><p>The initialization of the simulation includes several steps. The first step is to calculate the model states and initialize vegetation cells. The model state also creates a controlled random number generator. The second step is to initialize the BPH agents and place them inside the model. At the initialization of the model, we create the environment.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>TODO?</p></div></div><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.init_model" href="#RiceBPH.Models.init_model"><code>RiceBPH.Models.init_model</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">init_model(; seed::Union{Int, Nothing} = Nothing, kwargs...)</code></pre><p>Create and return a ABM model. Keyword arguments are passed to <a href="../99-api/#RiceBPH.Models.ModelParameters"><code>ModelParameters</code></a>.</p><p>At the initialization of the model, inferable model properties are calculated to optimize the runtime of the simulation (see <a href="../99-api/#RiceBPH.Models.init_properties-Tuple{RiceBPH.Models.ModelParameters, Int64}"><code>init_properties</code></a>). This process also create the simulated environment and the vegetation cell state.</p><p>After that, the BPH agents are initialized with random states. After the BPHs are initialized and placed inside the model, we collect the initial data of interest and store them in the model state.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/init.jl#L214-L227">source</a></section></article><h2 id="Input-data"><a class="docs-heading-anchor" href="#Input-data">Input data</a><a id="Input-data-1"></a><a class="docs-heading-anchor-permalink" href="#Input-data" title="Permalink"></a></h2><p>The model does not use any external data.</p><h2 id="Submodels"><a class="docs-heading-anchor" href="#Submodels">Submodels</a><a id="Submodels-1"></a><a class="docs-heading-anchor-permalink" href="#Submodels" title="Permalink"></a></h2><h5 id="Notation"><a class="docs-heading-anchor" href="#Notation">Notation</a><a id="Notation-1"></a><a class="docs-heading-anchor-permalink" href="#Notation" title="Permalink"></a></h5><p>To make sure readers understand our model correctly, we will provide the notation system that we use in this material.</p><p>We use index variables such as <span>$i,j,k,l,\ldots$</span> to refer to the identification number of an agent. The state variable of an agent is referred to by their respective notation in <a href="#Entities,-state-variables,-and-scales">Entities, state variables, and scales</a>. For example, the energy of agent <span>$i$</span> is <span>$e_i$</span>.</p><p>For vegetation cells, we use spatial coordinates (such as <span>$x,y$</span>) to index them. Their state variables follow the same rule. For example, the energy of the rice cell at position <span>$x, y$</span> is <span>$e_{x,y}$</span>, the energy of the rice cell where the agent <span>$i$</span> at is <span>$e_{x_i, y_i}$</span>.</p><p>To abuse the notation, we hide the timestep variable and consider each submodel within its context (the &quot;current&quot; timestep). The state variable is updated in-place and the update is notated by <span>$\gets$</span>. For example, when an agent consumes energy:</p><p class="math-container">\[e_i \gets e_i - E_C.\]</p><p>We do not explicitly refer to the timestep <span>$t$</span> for several reasons. The main reason is that sometime, state variables are updated many times within a timestep, so it is not possible to use a timestep variable to describe the changes. Moreover, every submodel is described in its own context, therefore, the current time step is always <span>$t$</span>; adding the time step variable <span>$t$</span> does not make it easier to perceive the model (if not harder).</p><h5 id="Model-parameters"><a class="docs-heading-anchor" href="#Model-parameters">Model parameters</a><a id="Model-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Model-parameters" title="Permalink"></a></h5><p>The initialisation variables, parameters and states of the model are presented in the next table:</p><table><tr><th style="text-align: center">Variable</th><th style="text-align: left">Description</th><th style="text-align: right">Value</th></tr><tr><td style="text-align: center"><span>$S$</span></td><td style="text-align: left">The environment grid size</td><td style="text-align: right"><span>$125$</span></td></tr><tr><td style="text-align: center"><span>$S_F$</span></td><td style="text-align: left">The number of flower cells at the center of the grid</td><td style="text-align: right"><span>$0$</span></td></tr><tr><td style="text-align: center"><span>$N_{I}$</span></td><td style="text-align: left">The number of initialized BPH</td><td style="text-align: right"><span>$200$</span></td></tr><tr><td style="text-align: center"><span>$P_0$</span></td><td style="text-align: left">The base elimination probability</td><td style="text-align: right"><span>$0$</span></td></tr><tr><td style="text-align: center">-</td><td style="text-align: left">The BPHs&#39; initial positions</td><td style="text-align: right"><a href="@ref"><code>Corner</code></a></td></tr><tr><td style="text-align: center"><span>$E_{T}$</span></td><td style="text-align: left">The energy conversion from rice to BPHs</td><td style="text-align: right"><span>$0.032$</span></td></tr><tr><td style="text-align: center"><span>$E_{C}$</span></td><td style="text-align: left">The energy conversion from rice to BPHs</td><td style="text-align: right"><span>$E_T / 3$</span></td></tr></table><h5 id="Initialisation-actions"><a class="docs-heading-anchor" href="#Initialisation-actions">Initialisation actions</a><a id="Initialisation-actions-1"></a><a class="docs-heading-anchor-permalink" href="#Initialisation-actions" title="Permalink"></a></h5><p>Since the vegetation cells are organized in a grid, we use matrices to represent the cells for efficiency. The coordinates of the vegetation cells translate directly to the matrix indices. Each of the other states is represented by a matrix.</p><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.init_cell_types" href="#RiceBPH.Models.init_cell_types"><code>RiceBPH.Models.init_cell_types</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">init_cell_types(map_size::Integer, flower_width::Integer)
init_cell_types(S::Integer, S_F::Integer)</code></pre><p>Returns a <a href="../99-api/#RiceBPH.Models.CellType"><code>CellType</code></a> matrix. Rice cells&#39; values are 1.  Flower cells&#39; values are 0. The resulting matrix can be defined by:</p><p class="math-container">\[\begin{equation}
\left[t_{x,y}\right]_{S \times S}=\left\{ \begin{array}{cl}
0, &amp; y_{a}\le y\le y_{b},\\
1, &amp; \text{otherwise},
\end{array}\right\}, 
\end{equation}\]</p><p>where <span>$y_a$</span> and <span>$y_b$</span> are auxilary variables defined by:</p><p class="math-container">\[\begin{align}
y_{a} &amp; =\left\lfloor \frac{S-S_{F}}{2}\right\rfloor +\left(S+S_{F}\mod2\right)+1.\\
y_{b} &amp; =S+S_{F}-1.
\end{align}\]</p><p>See also: <a href="../99-api/#RiceBPH.Models.CellType"><code>CellType</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/init.jl#L5-L30">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.init_rice_map" href="#RiceBPH.Models.init_rice_map"><code>RiceBPH.Models.init_rice_map</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">init_rice_map(S::Integer)</code></pre><p>Returns a matrix filled with <span>$1$</span> of size <span>$S \times S$</span>.</p><p class="math-container">\[\left[e_{x,y}\right]_{S\times S}\equiv1.\]</p><p>In code terms, it&#39;s basically <code>ones(Float32, S, S)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/init.jl#L48-L57">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.init_pr_eliminate" href="#RiceBPH.Models.init_pr_eliminate"><code>RiceBPH.Models.init_pr_eliminate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">init_pr_eliminate(init_pr::Float32, cell_types::Matrix{CellType})</code></pre><p>Returns <code>Float32</code> matrix of elimination probability. The result matrix is defined by:</p><p class="math-container">\[\left[p_{x,y}\right]_{S\times S} = P_0 \times (1 - M)) ∗ G(\sigma),\]</p><p>where:</p><ul><li><span>$G(\sigma)$</span> is the Gaussian kernel,</li><li><span>$P_0$</span> is the base elimination probability,</li><li><span>$M$</span> is the cell type matrix (see <a href="#RiceBPH.Models.init_cell_types"><code>init_cell_types</code></a>).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/init.jl#L63-L75">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.init_bphs!" href="#RiceBPH.Models.init_bphs!"><code>RiceBPH.Models.init_bphs!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">init_bphs!(model)</code></pre><p>Create <span>$N_I$</span> agents and put them in the model. The state variables of agent <span>$i$</span> are initialized as follows:</p><ul><li>positions <span>$x_i, y_i$</span>: sampled from <em>cumulative</em> distribution <span>$\mathrm{Poi}(6.00)$</span> with constraint <span>$x_i \le 15$</span> and <span>$y_i \le 15$</span> (see <a href="@ref"><code>IP_MAX</code></a> and <a href="@ref"><code>IP_DST</code></a>),</li><li>energy <span>$e_i$</span>: sampler from <span>$\mathcal{N}(0.50, 0.50)$</span>,</li><li>gender <span>$z^{(g)}_i$</span>: sample from {Male, Female} with weight {0.37, 0.63},</li><li>form <span>$z^{(f)}_i$</span>: sample from {Brachy, Macro} with weight {0.47, 0.53},</li><li>stage <span>$z^{(s)}_i$</span>: sample from {Egg, Nymph, Adult, Dead} with weight {0.33, 0.47, 0.20, 0.00},</li><li>stage countdown <span>$t^{(s)}_i$</span>: derives from their other state variables,</li><li>reproduction countdown <span>$t^{(r)}_i$</span>: is the preoviposition countdown if agent is not an adult, else the countdown is either preoviposition countdown or reproduction countdown with equal chances.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/init.jl#L160-L172">source</a></section></article><h5 id="Vegetation-cell-submodels"><a class="docs-heading-anchor" href="#Vegetation-cell-submodels">Vegetation cell submodels</a><a id="Vegetation-cell-submodels-1"></a><a class="docs-heading-anchor-permalink" href="#Vegetation-cell-submodels" title="Permalink"></a></h5><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.model_action_eliminate!" href="#RiceBPH.Models.model_action_eliminate!"><code>RiceBPH.Models.model_action_eliminate!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">model_action_eliminate!(model)</code></pre><p>Eliminate BPHs base on their energy and the pr eliminate map. The elimination probability is given by  <span>$p_{x,y}$</span>.</p><p>For each position <span>$x, y$</span>, for each agent <span>$i$</span> whose position <span>$x_i = x, y_i = y$</span>, the agent is removed from the simulation with the probability <span>$p_{x, y}$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/model_step.jl#L91-L98">source</a></section></article><h5 id="BPH-agent-submodels"><a class="docs-heading-anchor" href="#BPH-agent-submodels">BPH agent submodels</a><a id="BPH-agent-submodels-1"></a><a class="docs-heading-anchor-permalink" href="#BPH-agent-submodels" title="Permalink"></a></h5><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.agent_action_growup!" href="#RiceBPH.Models.agent_action_growup!"><code>RiceBPH.Models.agent_action_growup!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">agent_action_growup!(agent, model)</code></pre><p>Perform the grow up action on agent with id <span>$i$</span>:</p><p>The stage countdown of the agent is decresed by one.</p><p class="math-container">\[\begin{equation}
t_i^{(s)} \gets t_i^{(s)} - 1.
\end{equation}\]</p><p>The agent then consumes energy.</p><p class="math-container">\[e_i \gets e_i - E_C\]</p><p>If stage countdown is greater than zero, end the action. Otherwise, get the next stage and sample the next stage countdown, assign the next stage and the next countdown to the agent. The next stage  <span>$z^{(s)}_i$</span> and next the stage countdown <span>$t^{(s)}_i$</span> is returned by <a href="#RiceBPH.Models.get_next_stage"><code>get_next_stage</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/agent_step.jl#L7-L24">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.agent_action_move!" href="#RiceBPH.Models.agent_action_move!"><code>RiceBPH.Models.agent_action_move!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">agent_action_move!(agent, model)</code></pre><p>Perform the move action of the <code>agent</code>:</p><p>Let the agent&#39;s ID <span>$i$</span>, the agent&#39;s position on the grid <span>$x=x_i$</span>, <span>$y=y_i$</span>. The agent only moves under certain conditions, which are: energy is greater or equal to energy consumption</p><p class="math-container">\[\begin{equation}
e_i \ge E_T;
\end{equation}\]</p><p>or the cell that the agent is currently on is a rice cell and has zero energy:</p><p class="math-container">\[\begin{equation}
e_{x, y} = 0;
\end{equation}\]</p><p>or the cell type is flower:</p><p class="math-container">\[\begin{equation}
t_{x, y} = 0.
\end{equation}\]</p><p>If the conditions are not met, stop the action. Otherwise, the agent then consumes energy:</p><p class="math-container">\[\begin{equation}
e_{i} \gets e_{i} - E_C.
\end{equation}\]</p><p>After that, a direction <span>$\Delta x, \Delta y$</span> is sampled within the radius of 2 cells (approximately 30cm) with weights. The weight of the moving direction is calculated by</p><p class="math-container">\[\begin{equation}
w_{\Delta x,\Delta y}=\begin{cases}
e_{x+\Delta x,y+\Delta y}, &amp; t_{x+\Delta x,y+\Delta y}=1,\\
0.5, &amp; t_{x+\Delta x,y+\Delta y}=0.
\end{cases}
\end{equation}\]</p><p>After a direction is sampled, the agent then moves along the sampled direction</p><p class="math-container">\[\begin{align}
x_i &amp;\gets x_i + \Delta x,\\
y_i &amp;\gets y_i + \Delta y.
\end{align}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/agent_step.jl#L41-L88">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.agent_action_eat!" href="#RiceBPH.Models.agent_action_eat!"><code>RiceBPH.Models.agent_action_eat!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">agent_action_eat!(agent, model)</code></pre><p>Perform eat action of <code>agent</code>.</p><p>First, check if the current cell is a <a href="@ref"><code>FlowerCell</code></a>, if it is, stop the action.</p><p>An amount of energy is subtracted from the <a href="@ref"><code>RiceCell</code></a> <span>$x_i,y_i$</span> and added to the agent <span>$i$</span>.</p><p class="math-container">\[\begin{align}
e_{x_i, y_i} &amp;\gets e_{x_i,y_i} - \Delta  e,\\
e_i &amp;\gets e_i + \Delta  e,
\end{align}\]</p><p>where the transfered energy <span>$\Delta e$</span> is calculated by</p><p class="math-container">\[\begin{equation}
\Delta  e=\min\left(1-e_i,e_{x_i,y_i},e_{T}\right).
\end{equation}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/agent_step.jl#L117-L137">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.agent_action_reproduce!" href="#RiceBPH.Models.agent_action_reproduce!"><code>RiceBPH.Models.agent_action_reproduce!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">agent_action_reproduce!(agent, model)</code></pre><p>Perform the reproductive action of <code>agent</code> <span>$i$</span>.</p><p>First, decrease the reproduction countdown of the agent <span>$i$</span>.</p><p class="math-container">\[\begin{equation}
t^{(p)}_i \gets t^{(p)}_i - 1
\end{equation}\]</p><p>After that, check for the reproduction conditions: the <code>agent</code> is a female,</p><p class="math-container">\[\begin{equation}
z^{(g)}_i = 1,
\end{equation}\]</p><p>the agent energy is larger or equals than the energy consumption</p><p class="math-container">\[\begin{equation}
e_i \ge E_C,
\end{equation}\]</p><p>the reproduction countdown is zero:</p><p class="math-container">\[t^{(p)} = 0,\]</p><p>the energy of rice cell at agent position is greater than the energy transfer parameter:</p><p class="math-container">\[e_{x_i, y_i} \ge E_T.\]</p><p>If the condition is met, the number of offsprings <span>$N$</span> from the distributions of offspring quantity <span>$\mathcal{N}(8.50, 3.50)$</span>.</p><p>For <span>$k=\overline{1, N}$</span>, the offspring agent <span>$k$</span> is initialized with:</p><ul><li>energy the same as their parent: <span>$e_k \gets e_i$</span>,</li><li>the position of the parent <span>$x_k \gets x_i$</span>, <span>$y_k \gets y_i$</span>,</li><li>stage is egg: <span>$z^{(s)}_k \gets 0$</span>,</li><li>stage countdown is of egg: <span>$t^{(s)}_k \gets$</span><span>$\mathcal{N}(228.00, 84.00)$</span>,</li><li>gender <span>$z^{(g)}_k$</span>: sample from {Male, Female} with weight {0.37, 0.63},</li><li>form <span>$z^{(f)}_k$</span>: sample from {Brachy, Macro} with weight {0.47, 0.53},</li><li>reproduction countdown follows the preoviposition distribution (which depends on the form).</li></ul><p>The reproduction countdown is initialized with preoviposition so that when the agent&#39;s reproduction is enabled, it automatically enters the preoviposition.</p><p>After reproducing, the mother agent <span>$i$</span> consume energy and get a new reproduction count down:</p><p class="math-container">\[\begin{align}
t_{i}^{\left(r\right)} &amp;\gets t^{\left(r\right)}\left(z_{i}^{\left(f\right)}\right),\\
e_{i} &amp;\gets e_{i}-E_{C}.
\end{align}\]</p><p>See also: <a href="#RiceBPH.Models.get_preoviposition_countdown"><code>get_preoviposition_countdown</code></a>, <a href="#RiceBPH.Models.get_reproduction_countdown"><code>get_reproduction_countdown</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/agent_step.jl#L157-L209">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.agent_action_die!" href="#RiceBPH.Models.agent_action_die!"><code>RiceBPH.Models.agent_action_die!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">agent_action_die!(agent, model)</code></pre><p>Check if the <code>agent</code> should be eliminated from the simulation.</p><p>The agent <span>$i$</span> dies and gets removed from the simulated if either: its energy is zero or less (<span>$e_i \le 0$</span>), or its stage is &quot;Dead&quot; (<span>$z^{(s)}_i = 3$</span>).</p><p>See also: <a href="#RiceBPH.Models.Stage"><code>Stage</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/agent_step.jl#L252-L260">source</a></section></article><h5 id="Reproduction-parameters"><a class="docs-heading-anchor" href="#Reproduction-parameters">Reproduction parameters</a><a id="Reproduction-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Reproduction-parameters" title="Permalink"></a></h5><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.Form" href="#RiceBPH.Models.Form"><code>RiceBPH.Models.Form</code></a> — <span class="docstring-category">Type</span></header><section><div><p>The form of BPH agent. This enum is <code>Bool</code> based.</p><table><tr><th style="text-align: left">Value</th><th style="text-align: left">Bool</th><th style="text-align: left">Description</th></tr><tr><td style="text-align: left"><code>Brachy</code></td><td style="text-align: left"><code>false</code></td><td style="text-align: left">The truncate-winged form</td></tr><tr><td style="text-align: left"><code>Macro</code></td><td style="text-align: left"><code>true</code></td><td style="text-align: left">The fully-winged form</td></tr></table></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/constants.jl#L209-L216">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.get_reproduction_countdown" href="#RiceBPH.Models.get_reproduction_countdown"><code>RiceBPH.Models.get_reproduction_countdown</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_reproduction_countdown(form::Form)</code></pre><p>Return the reproduction countdown distribution depends on the agents&#39; form.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L90-L94">source</a></section><section><div><p>Macropterous&#39;s reproduction countdown distribution is <span>$\mathcal{N}(22.53, 9.28)$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L97-L99">source</a></section><section><div><p>Brachypterous&#39;s reproduction countdown distribution is <span>$\mathcal{N}(15.26, 6.29)$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L101-L103">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.get_preoviposition_countdown" href="#RiceBPH.Models.get_preoviposition_countdown"><code>RiceBPH.Models.get_preoviposition_countdown</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_preoviposition_countdown(form::Form)</code></pre><p>Return the first-reproduction countdown distribution depends on the agents&#39; form.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L109-L113">source</a></section><section><div><p>Macropterous&#39;s preoviposition distribution is <span>$\mathcal{N}(177.60, 72.00)$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L118-L120">source</a></section><section><div><p>Brachypterous&#39;s preoviposition distribution is <span>$\mathcal{N}(91.20, 72.00)$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L125-L127">source</a></section></article><h5 id="Age-structure"><a class="docs-heading-anchor" href="#Age-structure">Age structure</a><a id="Age-structure-1"></a><a class="docs-heading-anchor-permalink" href="#Age-structure" title="Permalink"></a></h5><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.Stage" href="#RiceBPH.Models.Stage"><code>RiceBPH.Models.Stage</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Stages of BPHs agent, represented by a Int8 value. The stages are:</p><table><tr><th style="text-align: left">Stage</th><th style="text-align: left">Value</th><th style="text-align: left">Represents</th></tr><tr><td style="text-align: left"><code>Egg</code></td><td style="text-align: left">0</td><td style="text-align: left">BPH&#39;s eggs</td></tr><tr><td style="text-align: left"><code>Nymph</code></td><td style="text-align: left">1</td><td style="text-align: left">BPHs in nymph stage</td></tr><tr><td style="text-align: left"><code>Adult</code></td><td style="text-align: left">2</td><td style="text-align: left">BPHs in adult stage</td></tr><tr><td style="text-align: left"><code>Dead</code></td><td style="text-align: left">3</td><td style="text-align: left">BPHs in adult stage but their time runs out</td></tr></table><p>Agents with <code>Dead</code> stage will be removed at the end of their step. See also: <a href="#RiceBPH.Models.get_next_stage"><code>get_next_stage</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/constants.jl#L184-L196">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.get_stage_countdown" href="#RiceBPH.Models.get_stage_countdown"><code>RiceBPH.Models.get_stage_countdown</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_stage_countdown(stage::Stage, gender::Gender, form::Form)</code></pre><p>Return the count down to the next stage of <code>stage</code>, depends on the <code>gender</code> and <code>form</code> of the agent.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L4-L8">source</a></section><section><div><p>Eggs&#39; stage countdown distribution: <span>$\mathcal{N}(228.00, 84.00)$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L13-L15">source</a></section><section><div><p>Female nymphs&#39; stage countdown distribution: <span>$\mathcal{N}(324.00, 60.00)$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L20-L22">source</a></section><section><div><p>Male nymphs&#39; stage countdown distribution: <span>$\mathcal{N}(336.00, 24.00)$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L27-L29">source</a></section><section><div><p>Male adults&#39; stage countdown distribution: <span>$\mathcal{N}(276.00, 12.00)$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L34-L36">source</a></section><section><div><p>Female macropterous adults&#39; stage countdown distribution: <span>$\mathcal{N}(660.00, 12.00)$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L41-L43">source</a></section><section><div><p>Female brachypterous adults&#39; stage countdown distribution: <span>$\mathcal{N}(540.00, 12.00)$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L48-L50">source</a></section><section><div><p>Dead stage is just a pending removal at the end of the simulation step, therefore the countdown distribution is just the set <span>$\{9999\}$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L55-L57">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.get_next_stage" href="#RiceBPH.Models.get_next_stage"><code>RiceBPH.Models.get_next_stage</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_next_stage(stage::Stage)</code></pre><p>Return the next age structure of <code>stage</code>. See also <a href="#RiceBPH.Models.Stage"><code>Stage</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L65-L69">source</a></section><section><div><p>The stage after Egg is Nymph.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L72-L74">source</a></section><section><div><p>The stage after Nymph is Adult.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L77-L79">source</a></section><section><div><p>The stage after Adult is Dead.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/mapping.jl#L82-L84">source</a></section></article><h5 id="Data-collection"><a class="docs-heading-anchor" href="#Data-collection">Data collection</a><a id="Data-collection-1"></a><a class="docs-heading-anchor-permalink" href="#Data-collection" title="Permalink"></a></h5><div class="admonition is-danger"><header class="admonition-header">Danger</header><div class="admonition-body"><p>This is unfinished documentation.</p></div></div><article class="docstring"><header><a class="docstring-binding" id="RiceBPH.Models.model_action_summarize!" href="#RiceBPH.Models.model_action_summarize!"><code>RiceBPH.Models.model_action_summarize!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">model_action_summarize!(model)</code></pre><p>Collect agent and rice statistics and save them in model properties. The collected is the percentage of healthy rice <span>$r_R$</span> and the number of BPHs, matching stages, forms and genders.</p><table><tr><th style="text-align: left">Metric</th><th style="text-align: left">Description</th></tr><tr><td style="text-align: left"><span>$r_R$</span></td><td style="text-align: left">Percentage of healthy rice</td></tr><tr><td style="text-align: left"><span>$n_E$</span></td><td style="text-align: left">Number of eggs</td></tr><tr><td style="text-align: left"><span>$n_N$</span></td><td style="text-align: left">Number of nymphs</td></tr><tr><td style="text-align: left"><span>$n_M$</span></td><td style="text-align: left">Number of adults with fully-winged form</td></tr><tr><td style="text-align: left"><span>$n_B$</span></td><td style="text-align: left">Number of adults with truncate-winged form</td></tr><tr><td style="text-align: left"><span>$n_B$</span></td><td style="text-align: left">Number of females</td></tr></table><p>These metrics are calculated as follow:</p><p class="math-container">\[\begin{align}
r_{R} &amp; =\frac{\left|\left\{ \left(x,y\right)\colon t_{x,y}=1\land e_{x,y}\ge0.5\right\} \right|}{\left|\left\{ \left(x,y\right)\colon t_{x,y}=1\right\} \right|}\\
n_{E} &amp; =\left|\left\{ i\colon z_{i}^{\left(s\right)}=0\right\} \right|,\\
n_{N} &amp; =\left|\left\{ i\colon z_{i}^{\left(s\right)}=1\right\} \right|,\\
n_{M} &amp; =\left|\left\{ i\colon z_{i}^{\left(s\right)}=2\land z_{i}^{\left(t\right)}=0\right\} \right|,\\
n_{B} &amp; =\left|\left\{ i\colon z_{i}^{\left(s\right)}=2\land z_{i}^{\left(t\right)}=1\right\} \right|,\\
n_{F} &amp; =\left|\left\{ i\colon z_{i}^{\left(s\right)}\ne0\land z_{i}^{\left(g\right)}=1\right\} \right|.
\end{align}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ndgnuh/RiceBPH/blob/d1e29173467a871c585c07f90809bf0e73d2089c/src/modeling/model_step.jl#L16-L42">source</a></section></article><h2 id="Bibliography"><a class="docs-heading-anchor" href="#Bibliography">Bibliography</a><a id="Bibliography-1"></a><a class="docs-heading-anchor-permalink" href="#Bibliography" title="Permalink"></a></h2><dl><dt>Syahrawati2019</dt>
<dd>
  <div id="Syahrawati2019">M. Syahrawati, O.A. Putra, R. Rusli, E. Sulyanti, Population structure of brown planthopper (Nilaparvata lugens, Hemiptera: Delphacidae) and attack level in endemic area of Padang city, Indonesia, Asian Journal of Agriculture and Biology, 7(Special Issue), 271-276, 2019.</div>
</dd>
</dl></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« RiceBPH Model</a><a class="docs-footer-nextpage" href="../99-api/">API Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Friday 28 July 2023 14:12">Friday 28 July 2023</span>. Using Julia version 1.9.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
